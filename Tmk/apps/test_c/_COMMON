 #
 # $Id: .common,v 1.2 1997/04/12 08:41:24 alc Exp $
 #
TmkDIR	= ../../..
TmkLIB	= $(TmkDIR)/lib.$(ARCH)

CPPFLAGS= -I$(TmkDIR)/include

OBJS	= $(MACHDEP_OBJS)

barrier.atm: $(MACHDEP_OBJS) barrier.o $(TmkLIB)/libTmk_atm.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) barrier.o -L$(TmkLIB) -lTmk_atm -L/usr/fore/lib -latm $(MACHDEP_LIBS)

diff.atm: $(MACHDEP_OBJS) diff.o $(TmkLIB)/libTmk_atm.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) diff.o -L$(TmkLIB) -lTmk_atm -L/usr/fore/lib -latm $(MACHDEP_LIBS)

lock.atm: $(MACHDEP_OBJS) lock.o $(TmkLIB)/libTmk_atm.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) lock.o -L$(TmkLIB) -lTmk_atm -L/usr/fore/lib -latm $(MACHDEP_LIBS)

page.atm: $(MACHDEP_OBJS) page.o $(TmkLIB)/libTmk_atm.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) page.o -L$(TmkLIB) -lTmk_atm -L/usr/fore/lib -latm $(MACHDEP_LIBS)

barrier.mpl: $(MACHDEP_OBJS) barrier.o $(TmkLIB)/libTmk_mpl.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) barrier.o -L$(TmkLIB) -lTmk_mpl $(MACHDEP_LIBS)

diff.mpl: $(MACHDEP_OBJS) diff.o $(TmkLIB)/libTmk_mpl.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) diff.o -L$(TmkLIB) -lTmk_mpl $(MACHDEP_LIBS)

lock.mpl: $(MACHDEP_OBJS) lock.o $(TmkLIB)/libTmk_mpl.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) lock.o -L$(TmkLIB) -lTmk_mpl $(MACHDEP_LIBS)

page.mpl: $(MACHDEP_OBJS) page.o $(TmkLIB)/libTmk_mpl.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) page.o -L$(TmkLIB) -lTmk_mpl $(MACHDEP_LIBS)

barrier.udp: $(MACHDEP_OBJS) barrier.o $(TmkLIB)/libTmk_udp.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) barrier.o -L$(TmkLIB) -lTmk_udp $(MACHDEP_LIBS)

cond.udp: $(MACHDEP_OBJS) cond.o $(TmkLIB)/libTmk_udp.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) cond.o -L$(TmkLIB) -lTmk_udp $(MACHDEP_LIBS)

diff.udp: $(MACHDEP_OBJS) diff.o $(TmkLIB)/libTmk_udp.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) diff.o -L$(TmkLIB) -lTmk_udp $(MACHDEP_LIBS)

lock.udp: $(MACHDEP_OBJS) lock.o $(TmkLIB)/libTmk_udp.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) lock.o -L$(TmkLIB) -lTmk_udp $(MACHDEP_LIBS)

page.udp: $(MACHDEP_OBJS) page.o $(TmkLIB)/libTmk_udp.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) page.o -L$(TmkLIB) -lTmk_udp $(MACHDEP_LIBS)

barrier.udp_ll: $(MACHDEP_OBJS) barrier.o $(TmkLIB)/libTmk_udp_ll.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) barrier.o -L$(TmkLIB) -lTmk_udp_ll -L$(LL)/lib -lllapi $(MACHDEP_LIBS)

diff.udp_ll: $(MACHDEP_OBJS) diff.o $(TmkLIB)/libTmk_udp_ll.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) diff.o -L$(TmkLIB) -lTmk_udp_ll -L$(LL)/lib -lllapi $(MACHDEP_LIBS)

lock.udp_ll: $(MACHDEP_OBJS) lock.o $(TmkLIB)/libTmk_udp_ll.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) lock.o -L$(TmkLIB) -lTmk_udp_ll -L$(LL)/lib -lllapi $(MACHDEP_LIBS)

page.udp_ll: $(MACHDEP_OBJS) page.o $(TmkLIB)/libTmk_udp_ll.a
	$(CC) $(CFLAGS) -o $@ $(MACHDEP_OBJS) page.o -L$(TmkLIB) -lTmk_udp_ll -L$(LL)/lib -lllapi $(MACHDEP_LIBS)

barrier.o: ../src/barrier.c $(TmkDIR)/include/Tmk.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c ../src/barrier.c

cond.o: ../src/cond.c $(TmkDIR)/include/Tmk.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c ../src/cond.c

diff.o: ../src/diff.c $(TmkDIR)/include/Tmk.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c ../src/diff.c

lock.o: ../src/lock.c $(TmkDIR)/include/Tmk.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c ../src/lock.c

page.o: ../src/page.c $(TmkDIR)/include/Tmk.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c ../src/page.c

clean:
	rm -f *.o *.atm *.udp *.udp_ll
